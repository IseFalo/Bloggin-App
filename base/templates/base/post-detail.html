{% extends 'base\base.html' %}
{% load static %}
<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">


  {% block title %}{{post.title}}{% endblock %}
  
</head>

<body>
  {% block content %}




  <div class="container">
    



    <div class="row">



      <div class="col-sm-12 col-md-12 col-lg-8 col-xl-8">
        <div class="post-detail-card" style="
          background: linear-gradient(71deg, #fffcfc, #faf9f9, #fffcfc);
          border-radius: 5px;
          padding: 20px;
          
          
          ">

          <h6>Post by <a href="{% url 'profile' post.author.id %}">{{post.author}}</a>(25.3k Subscribers)</h6>
                <p>
                  {% if request.user == post.author%}
                    <a href="" class="btn btn-sm btn-primary" data-bs-toggle="modal"  data-bs-target="#exampleModalToggle" href="#exampleModalToggle" role="button">Edit Post</a>
                    <a href="" class="btn btn-sm btn-secondary" data-bs-toggle="modal" data-bs-target="#exampleModal">Delete Post</a>
                    {% endif %} 





                <!-- Edit post modal   -->
                <div class="modal fade" id="exampleModalToggle" aria-hidden="true" aria-labelledby="exampleModalToggleLabel" tabindex="-1">
                  <div class="modal-dialog modal-fullscreen">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalToggleLabel">Edit Post</h5>
                        <button type="button" class="btn-close" data-bs-target="#exampleModalToggle2" data-bs-toggle="modal" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                      <div class="modal-body">
                        <form action="{% url 'edit-post' post.id %}" method="POST" enctype="multipart/form-data" id="post-form">
                          {% csrf_token %}
                          <div class="post-form">
                          <input type="text" class="post-title my-3" name="post-title" placeholder="" value="{{post.title}}">
                          {% if post.post_cover %}
                          <img src="{{ post.post_cover.url }}" alt="Post Cover" height="70" width="70">
                          {% endif %}
                          <label for="post-cover-image">Change post cover:</label>
                          <input type="file" name="post-cover-image" accept="image/*" value="">
                          <textarea name="post-text" class="post-text-area my-3" placeholder="Talk about something...">{{post.content}}</textarea>
                        </div>
                        </form>  
                      </div>
                      <div class="modal-footer">
                        <button class="btn btn-secondary" data-bs-target="#exampleModalToggle2" data-bs-toggle="modal" data-bs-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary" data-bs-target="#exampleModalToggle3" data-bs-toggle="modal" data-bs-dismiss="modal">Edit Post</button>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="modal fade" id="exampleModalToggle2" aria-hidden="true" aria-labelledby="exampleModalToggleLabel2" tabindex="-1">
                  <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalToggleLabel2">End Editing</h5>
                      </div>
                      <div class="modal-body">
                        Are you sure you want to close?
                      </div>
                      <div class="modal-footer">
                        <button class="btn btn-primary" data-bs-target="#exampleModalToggle" data-bs-toggle="modal" data-bs-dismiss="modal">Go back</button>
                        <button class="btn btn-secondary" data-bs-dismiss="modal">Yes</button>
                      </div>
                    </div>
                  </div>
                </div>
          
                <div class="modal fade" id="exampleModalToggle3" aria-hidden="true" aria-labelledby="exampleModalToggleLabel2" tabindex="-1">
                  <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalToggleLabel2">Post Confirm</h5>
                      </div>
                      <div class="modal-body">
                        Are you sure you want to edit this post?
                      </div>
                      <div class="modal-footer">
                        <button class="btn btn-primary" data-bs-target="#exampleModalToggle" data-bs-toggle="modal" data-bs-dismiss="modal">Go back</button>
                        <button class="btn btn-secondary" type="submit" data-bs-dismiss="modal" form="post-form">Yes</button>
                      </div>
                    </div>
                  </div>
                </div>













                <!-- Delete post Modal -->
                <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Delete Post</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                      <div class="modal-body">
                        Are you sure you want to delete this post?
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <a href="{% url 'delete-post' post.id %}" type="button" class="btn btn-danger">Yes</a>
                      </div>
                    </div>
                  </div>
                </div>
                </p>
                <small>Posted on {{post.created}} 
                  {% if post.edited %}
                  (edited)
                  {% endif %}

                </small>
                <h3>{{post.title}}</h3>
                <hr>
                <div class="post-cover">
                  {% if post.post_cover %}
                  <img src="{{post.post_cover.url}}" width="400" height="300" alt="">
                  {% endif %}  
                </div>
                <hr>
                <p>{{post.content}}</p>


                <form action="" method="POST">
                  {% csrf_token %}
                  <div class="comment-form">
                    <textarea name="comment" class="my-3" id="" cols="30" rows="10" placeholder="Comment..."></textarea>
                      <button type="submit" class="btn btn-sm btn-outline-dark my-3">Post Comment</button>
                  </div>
                </form>

                <p>
                  <a class="btn btn-sm btn-dark" data-bs-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
                    Comments({{post.comment_set.count}})
                  </a>
                </p>



                <div class="collapse mb-5" id="collapseExample">
                  <div class="comment-scroll">
                      <h6>Comments</h6>
                      {% for comment in post.comment_set.all %}
                      <div class="row g-0">
                          <div class="col-sm-2 col-xl-1">
                              <img src="{{comment.author.profile.profile_img.url}}" class="comment-scroll-image" alt="" width="50" height="50" srcset="">
                          </div>
                          <div class="col-sm-10 col-xl-11 text-start">
                              <h5 class="comment-username">@{{comment.author}}</h5>
                              <p>{{comment.text}}</p>
                          </div>
                      </div>
                      <hr>
                      {% endfor %}
                     
                  </div>

                </div>

        </div>
      </div>




    <div class="col-lg-4 d-none d-md-none d-lg-block d-xl-block">
      <div id="fixedElement">
        <div class="card" style="width: 100%;" id="suggest-card">
            <div class="card-body">
              <h5 class="text-center">Suggested</h5>
              <hr>
              {% for user in suggested_users %}
                <div class="row mt-4">
                    <div class="col-3">
                        <img src="{{ user.profile_img.url }}" class="start-post-image" alt="" width="80" height="80" srcset="">
                    </div>
                    <div class="col-9">
                        <h5>@{{ user.username }}</h5>
                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
                        <a href="#" class="btn btn-sm btn-dark" id="suggest-button">Subscribe <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" fill="currentColor" class="bi bi-check-circle-fill" viewBox="0 0 16 16">
                            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                          </svg></a>
                    </div>
                </div>
                {% endfor %}

                
            </div>
          </div>
</div>

    </div>






    </div>










  </div>


















  {% endblock %}







  <script src="assets/js/jquery-2.1.0.min.js"></script>

  <!-- Bootstrap -->
  <script src="assets/js/popper.js"></script>
  <script src="assets/js/bootstrap.min.js"></script>

  <!-- Plugins -->
  <script src="assets/js/scrollreveal.min.js"></script>
  <script src="assets/js/waypoints.min.js"></script>
  <script src="assets/js/jquery.counterup.min.js"></script>
  <script src="assets/js/imgfix.min.js"></script>
  <script src="assets/js/mixitup.js"></script>
  <script src="assets/js/accordions.js"></script>
  <script src="assets/js/owl-carousel.js"></script>

  <!-- Global Init -->
  <script src="assets/js/custom.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
    integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"
    integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V"
    crossorigin="anonymous"></script>

</body>

</html>