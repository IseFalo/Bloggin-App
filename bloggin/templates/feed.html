{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Home</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'css/feed-style.css' %}">
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
        <div class="container-fluid">
          <a class="navbar-brand" href="#">Bloggin</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
            <form class="d-flex search" role="search">
                <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                <button class="btn btn-outline-primary" type="submit"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                    <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                  </svg></button>
              </form>
            <ul class="navbar-nav">

            <li class="nav-item">
                <a class="nav-link active btn btn-primary" aria-current="page" href="#">Home</a>
            </li>
              <li class="nav-item text-center">
                <a class="nav-link" href="#">Profile</a>
              </li>

              <li class="nav-item text-center">
                <div class="dropdown">
                  <a class="nav-link dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
                    More
                  </a>              
                  <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                    <li><a class="dropdown-item" href="#">Settings</a></li>
                    <li><a class="dropdown-item" href="#">About</a></li>
                    <li><a class="dropdown-item" href="#">Advertisements</a></li>
                    <li><a class="dropdown-item" href="#">Privacy and Terms</a></li>
                    <li><a class="dropdown-item" href="#">Help Center</a></li>
                    <li><a class="dropdown-item" href="#">Ad choices</a></li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#logoutModal">Logout</a></li>
                  </ul>
                </div>
                
              </li>
            </ul>

          </div>
        </div>
      </nav>

          <!--Logout Modal -->
    <div class="modal fade" id="logoutModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="exampleModalLabel">Modal title</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <h5>Are you sure you want to logout?</h5>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-sm btn-secondary" data-bs-dismiss="modal">Close</button>
            <a href="{% url 'logout' %}" type="button" class="btn btn-sm btn-primary">Logout</a>
          </div>
        </div>
      </div>
    </div>






















    <div class="container my-5">
        <div class="row" id="row">
            <div class="col-lg-3 d-none d-md-none d-lg-none d-xl-block" id="col">
                <h5 class="text-center">Trending Posts</h5>
                <div class="card my-3" style="width: 250px;" id="trending-card">
                    <img src="images/book.jpg" height="150" class="card-img-top" alt="...">
                    <div class="card-body">
                      <h6 class="card-title">Card title</h6>
                      <p class="card-text">Read by 1.5m people this week</p>
                      <a href="#" class="btn btn-sm btn-outline-dark">View Post</a>
                    </div>
                  </div>

                  <div class="card my-3" style="width: 250px;" id="trending-card">
                    <img src="images/img2.jpg" height="150" class="card-img-top" alt="...">
                    <div class="card-body">
                      <h6 class="card-title">Card title</h6>
                      <p class="card-text">Read by 1.5m people this week</p>
                      <a href="#" class="btn btn-sm btn-outline-dark">View Post</a>
                    </div>
                  </div>

                  <div class="card my-3" style="width: 250px;" id="trending-card">
                    <img src="images/img6.jpg" height="150" class="card-img-top" alt="...">
                    <div class="card-body">
                      <h6 class="card-title">Card title</h6>
                      <p class="card-text">Read by 1.5m people this week</p>
                      <a href="#" class="btn btn-sm btn-outline-dark">View Post</a>
                    </div>
                  </div>

                  <div class="card my-3" style="width: 250px;" id="trending-card">
                    <img src="images/img6.jpg" height="150" class="card-img-top" alt="...">
                    <div class="card-body">
                      <h6 class="card-title">Card title</h6>
                      <p class="card-text">Read by 1.5m people this week</p>
                      <a href="#" class="btn btn-sm btn-outline-dark">View Post</a>
                    </div>
                  </div>

                  <div class="card my-3" style="width: 250px;" id="trending-card">
                    <img src="images/img6.jpg" height="150" class="card-img-top" alt="...">
                    <div class="card-body">
                      <h6 class="card-title">Card title</h6>
                      <p class="card-text">Read by 1.5m people this week</p>
                      <a href="#" class="btn btn-sm btn-outline-dark">View Post</a>
                    </div>
                  </div>

                  <hr>
                  <div id="fixedElement">
                    <div class="card my-3" style="width: 250px;">
                        <div class="card-body text-center">
                            <h6><a href="">Settings</a></h6>
                            <h6><a href="">About</a></h6>
                            <h6><a href="">Privacy and Terms</a></h6>
                            <h6><a href="">Advertisements</a></h6>
                            <hr>
                            <h6><a href="">Logout</a></h6>
                        </div>
                      </div>
                  </div>
            </div>






<div class="col-sm-12 col-md-12 col-lg-12 col-xl-6" id="col">         
    <div class="card text-center" id="start-post-card">
        <div class="card-header">
            <h5>Create Post</h5>
        </div>
        <div class="card-body">
            <a href="" data-bs-toggle="modal"  data-bs-target="#exampleModalToggle" href="#exampleModalToggle" role="button">
                <form action="">
                    <img src="{{profile.profile_img.url}}" class="start-post-image" alt="" srcset="">
                    <input type="text" class="start-post" placeholder="Start a Post">
                </form>
            </a>
        </div>
      </div>




      <div class="modal fade" id="exampleModalToggle" aria-hidden="true" aria-labelledby="exampleModalToggleLabel" tabindex="-1">
        <div class="modal-dialog modal-fullscreen">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalToggleLabel">Create Post</h5>
              <button type="button" class="btn-close" data-bs-target="#exampleModalToggle2" data-bs-toggle="modal" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <form action="create-post" method="POST" enctype="multipart/form-data" id="post-form">
                {% csrf_token %}
                <div class="post-form">
                <input type="text" class="post-title my-3" name="post-title" placeholder="Post title">
                <label for="post-cover-image">Add post cover:</label>
                <input type="file" name="post-cover-image" accept="image/*">
                <textarea name="post-text" class="post-text-area my-3" placeholder="Talk about something..."></textarea>
              </div>
              </form>  
            </div>
            <div class="modal-footer">
              <button class="btn btn-secondary" data-bs-target="#exampleModalToggle2" data-bs-toggle="modal" data-bs-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary" data-bs-target="#exampleModalToggle3" data-bs-toggle="modal" data-bs-dismiss="modal">Add Post</button>
            </div>
          </div>
        </div>
      </div>
      <div class="modal fade" id="exampleModalToggle2" aria-hidden="true" aria-labelledby="exampleModalToggleLabel2" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalToggleLabel2">End Creating</h5>
            </div>
            <div class="modal-body">
              Are you sure you want to close?
            </div>
            <div class="modal-footer">
              <button class="btn btn-primary" data-bs-target="#exampleModalToggle" data-bs-toggle="modal" data-bs-dismiss="modal">Go back</button>
              <button class="btn btn-secondary" data-bs-dismiss="modal">Yes</button>
            </div>
          </div>
        </div>
      </div>

      <div class="modal fade" id="exampleModalToggle3" aria-hidden="true" aria-labelledby="exampleModalToggleLabel2" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalToggleLabel2">Post Confirm</h5>
            </div>
            <div class="modal-body">
              Are you sure you want to post this?
            </div>
            <div class="modal-footer">
              <button class="btn btn-primary" data-bs-target="#exampleModalToggle" data-bs-toggle="modal" data-bs-dismiss="modal">Go back</button>
              <button class="btn btn-secondary" type="submit" data-bs-dismiss="modal" form="post-form">Yes</button>
            </div>
          </div>
        </div>
      </div>
      


























     
                  <div class="row">
                    {% for post in posts %}  
                    <div class="col-sm-12 col-md-12 col-lg-4 col-xl-6">
                      <div class="card mb-3 my-3" id="post-feed-card">
                        <div class="card-header">
                            <h5>{{post.author}}</h5>
                        </div>
                        <a href="{% url 'post-detail' post.id %}">
                          <img src="{{post.post_cover.url}}" class="card-img-top" id="feed-post-img" height="200" alt="...">
                        </a>                    
                        <div class="card-body">
                          <h5 class="card-title">{{post.title}} (5 mins read)</h5>  
                          <a href="" class="comment-link text-secondary">Read by {{post.read.count}} people</a>
                          <p class="card-text"><small class="text-muted">{{post.created}}</small></p>
                        </div>
                      </div>
                    </div>
                    {% endfor %}
                    
                  </div>                  
            </div>
            





            <div class="col-lg-3 d-none d-md-none d-lg-none d-xl-block" id="col">
              <div class="card my-3" style="width: 250px;" id="trending-card">
                <img src="{{profile.profile_img.url}}" height="150" class="card-img-top" alt="...">
                <div class="card-body">
                  <h6 class="card-title">{{profile.username}}</h6>
                  <p class="card-text">3m subscribers</p>
                  <a href="{% url 'profile' profile.username.id %}" class="btn btn-sm btn-outline-dark">View Profile</a>
                </div>
              </div>
                
                <div class="card my-3" style="width: 250px;" id="suggest-card">
                    <div class="card-body">
                      <h5 class="text-center">Suggested</h5>
                      <hr>
                        <div class="row mt-4">
                            <div class="col-3">
                                <img src="images/link 1.jpg" class="start-post-image" alt="" width="80" height="80" srcset="">
                            </div>
                            <div class="col-9">
                                <h5>@Iseoluwa's Food Blog</h5>
                                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
                                <a href="#" class="btn btn-sm btn-dark" id="suggest-button">Subscribe <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" fill="currentColor" class="bi bi-check-circle-fill" viewBox="0 0 16 16">
                                    <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                                  </svg></a>
                            </div>
                        </div>

                        <div class="row mt-4">
                          <div class="col-3">
                              <img src="images/link 1.jpg" class="start-post-image" alt="" width="80" height="80" srcset="">
                          </div>
                          <div class="col-9">
                              <h5>@Marvel Lovers</h5>
                              <p>Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
                              <a href="#" class="btn btn-sm btn-dark">Subscribe <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" fill="currentColor" class="bi bi-check-circle-fill" viewBox="0 0 16 16">
                                  <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                                </svg></a>
                          </div>
                      </div>

                      <div class="row mt-4">
                        <div class="col-3">
                            <img src="images/link 1.jpg" class="start-post-image" alt="" width="80" height="80" srcset="">
                        </div>
                        <div class="col-9">
                            <h5>@Naija Politics</h5>
                            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
                            <a href="#" class="btn btn-sm btn-dark">Subscribe <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" fill="currentColor" class="bi bi-check-circle-fill" viewBox="0 0 16 16">
                                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                              </svg></a>
                        </div>
                    </div>
                    </div>
                  </div>

                 
                  <hr>
                  <div id="fixedElement">
                    <h5 class="text-center pt-5">Trending Bloggers</h5>
                    <div class="card my-3" style="width: 250px;" id="suggest-card">
                        <div class="card-body">
                            <h6><img src="images/link 1.jpg" class="start-post-image" alt="" width="60" height="60" srcset=""> @Ise's Food Blog</h6>
                            <h6><img src="images/link 1.jpg" class="start-post-image" alt="" width="60" height="60" srcset="">@Marvel Dorm</h6>
                            <h6><img src="images/link 1.jpg" class="start-post-image" alt="" width="60" height="60" srcset="">@Sport Analyst</h6>
                            <h6><img src="images/link 1.jpg" class="start-post-image" alt="" width="60" height="60" srcset="">@Movies hub</h6>
                            <h6><img src="images/link 1.jpg" class="start-post-image" alt="" width="60" height="60" srcset="">@Fashion Star</h6>
                        </div>
                      </div>
                  </div>
            </div>
        </div>
    </div>






    <script>
      // Function to create a notification element
      function createNotification(message) {
          const notificationElement = document.createElement("div");
          notificationElement.classList.add("notification");
          notificationElement.textContent = message;
          return notificationElement;
      }
  
      // Connect to WebSocket
      const socket = new WebSocket('ws://${window.location.host}/ws/socket-server');
  
      socket.onopen = () => {
          console.log('WebSocket connection opened');
      };
  
      socket.onmessage = (event) => {
          const message = JSON.parse(event.data);
          console.log('Received message:', message.message);
  
          // Handle the received message, e.g., display a notification
          const notificationContainer = document.getElementById("notification-container");
          const notificationElement = createNotification(message.message);
          notificationContainer.appendChild(notificationElement);
      };
  
      socket.onclose = () => {
          console.log('WebSocket connection closed');
      };
  </script>


    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
  </body>
</html>